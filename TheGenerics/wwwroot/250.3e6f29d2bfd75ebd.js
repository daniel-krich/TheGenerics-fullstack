"use strict";(self.webpackChunkmerchandise_shop=self.webpackChunkmerchandise_shop||[]).push([[250],{1250:(K,Z,a)=>{a.r(Z),a.d(Z,{StoreModule:()=>O});var i=a(6895),S=a(2375),F=a(4466);class w{constructor(...n){n[0]instanceof w?(this.id=n[0].id,this.name=n[0].name,this.imageLink=n[0].imageLink,this.price=n[0].price,this.category=n[0].category):(this.id=n[0],this.name=n[1],this.imageLink=n[2],this.price=n[3],this.category=n[4])}}var M=a(4850),U=a(591),t=a(5062),T=a(529);class s{constructor(n,e){this.httpClient=n,this.baseUrl=e,this._storeProducts$=new U.X([]),n.get(this.baseUrl+"/api/products").pipe((0,M.U)(r=>r.map(c=>new w(c.id,c.name,c.imageLink,c.price,c.category)))).subscribe(r=>this._storeProducts$.next(r))}getStoreProducts(){return this._storeProducts$}findProduct(n){return this._storeProducts$.value.find(r=>r.id==n)}static#t=this.\u0275fac=function(e){return new(e||s)(t.LFG(T.eN),t.LFG("BASE_URL"))};static#e=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac})}class l{constructor(n,e){this.productId=n,this.productQuantity=e}}class p{constructor(n,e,r){this.storeService=n,this.httpClient=e,this.baseUrl=r,this._cartItems$=new U.X([]),e.get(this.baseUrl+"/api/shoppingcart").pipe((0,M.U)(c=>c.map(d=>new l(d.productId,d.productQuantity)))).subscribe(c=>this._cartItems$.next(c))}addItem(n){if(this.storeService.findProduct(n)){if(this._cartItems$.value.find(c=>c.productId==n))throw new Error("Item already exists in cart");this.httpClient.post(this.baseUrl+"/api/shoppingcart",new l(n,1)).subscribe(c=>{c&&this._cartItems$.next([...this._cartItems$.value,new l(n,1)])},this.handleRequestError)}}removeItem(n){this.httpClient.delete(this.baseUrl+`/api/shoppingcart/${n}/remove`).subscribe(e=>{e&&this._cartItems$.next(this._cartItems$.value.filter(r=>r.productId!=n))},this.handleRequestError)}modifyItem(n,e){const r=this._cartItems$.value.find(c=>c.productId==n);if(!r)throw new Error("Item doesn't exist in cart");this._modifyRequestSub?.unsubscribe(),this._modifyRequestSub=this.httpClient.put(this.baseUrl+"/api/shoppingcart",new l(n,e)).subscribe(c=>{c&&(r.productQuantity=e)},this.handleRequestError)}clearCart(){this.httpClient.get(this.baseUrl+"/api/shoppingcart/clearcart").subscribe(n=>{this._cartItems$.next([])},this.handleRequestError)}getCartItems(){return this._cartItems$}get cartPriceTotal(){return+this._cartItems$.value.reduce((n,e)=>{let r=this.storeService.findProduct(e.productId);return r?n+r.price*e.productQuantity:n},0).toFixed(2)}handleRequestError(n){alert(`Request error (${n.message})`)}static#t=this.\u0275fac=function(e){return new(e||p)(t.LFG(s),t.LFG(T.eN),t.LFG("BASE_URL"))};static#e=this.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac})}class m{static#t=this.\u0275fac=function(e){return new(e||m)};static#e=this.\u0275mod=t.oAB({type:m});static#n=this.\u0275inj=t.cJS({imports:[i.ez]})}class g{static#t=this.\u0275fac=function(e){return new(e||g)};static#e=this.\u0275mod=t.oAB({type:g});static#n=this.\u0275inj=t.cJS({providers:[s,p],imports:[i.ez,m,F.m]})}var A=a(4719);class h{static#t=this.\u0275fac=function(e){return new(e||h)};static#e=this.\u0275mod=t.oAB({type:h});static#n=this.\u0275inj=t.cJS({imports:[i.ez,A.u5]})}class f{static#t=this.\u0275fac=function(e){return new(e||f)};static#e=this.\u0275mod=t.oAB({type:f});static#n=this.\u0275inj=t.cJS({imports:[i.ez]})}var $=a(3372),_=(()=>{return(o=_||(_={}))[o.MUSIC=0]="MUSIC",o[o.MERCH=1]="MERCH",_;var o})();function J(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"span",2),t._uU(2),t.qZA(),t._UZ(3,"img",3),t.TgZ(4,"div",4)(5,"span",5),t._uU(6),t.qZA(),t.TgZ(7,"button",6),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.addItemToCart())}),t._uU(8,"ADD TO CART"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.product.name),t.xp6(1),t.Q6J("src",e.product.imageLink,t.LSH),t.xp6(3),t.hij("$",e.product.price,"")}}class C{constructor(n,e){this.storeService=n,this.cartService=e}ngOnInit(){void 0!==this.itemId&&(this.product=this.storeService.findProduct(this.itemId))}addItemToCart(){if(void 0!==this.product)try{this.cartService.addItem(this.product.id)}catch(n){alert(n)}}static#t=this.\u0275fac=function(e){return new(e||C)(t.Y36(s),t.Y36(p))};static#e=this.\u0275cmp=t.Xpm({type:C,selectors:[["app-item-card"]],inputs:{itemId:"itemId"},decls:1,vars:1,consts:[["class","shop-item",4,"ngIf"],[1,"shop-item"],[1,"shop-item-title"],[1,"shop-item-image",3,"src"],[1,"shop-item-details"],[1,"shop-item-price"],["type","button",1,"btn","btn-primary","shop-item-button",3,"click"]],template:function(e,r){1&e&&t.YNc(0,J,9,3,"div",0),2&e&&t.Q6J("ngIf",r.product)},dependencies:[i.O5],styles:[".shop-item[_ngcontent-%COMP%]{margin:50px}.shop-item-title[_ngcontent-%COMP%]{display:block;width:100%;text-align:center;font-weight:700;font-size:1.5em;color:#333;margin-bottom:15px}.shop-item-image[_ngcontent-%COMP%]{height:250px;width:250px}.shop-item-details[_ngcontent-%COMP%]{display:flex;align-items:center;padding:5px}.shop-item-price[_ngcontent-%COMP%]{flex-grow:1;color:#333}.btn[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;padding:.67em;cursor:pointer}.btn-primary[_ngcontent-%COMP%]{color:#fff;background-color:#56ccf2;border:none;border-radius:.3em;font-weight:700}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#4cbde2}"]})}class u{transform(n,e){return n.filter(r=>r.category==e)}static#t=this.\u0275fac=function(e){return new(e||u)};static#e=this.\u0275pipe=t.Yjl({name:"extractItemsFromProductCategory",type:u,pure:!0})}function Q(o,n){1&o&&t._UZ(0,"app-item-card",5),2&o&&t.Q6J("itemId",n.$implicit.id)}function Y(o,n){if(1&o&&(t.TgZ(0,"section",1),t._UZ(1,"h2",2),t.TgZ(2,"div",3),t.YNc(3,Q,1,1,"app-item-card",4),t.ALo(4,"extractItemsFromProductCategory"),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("innerText",e.productsCategoryName),t.xp6(2),t.Q6J("ngForOf",t.xi3(4,2,e.products,e.productsCategory))}}class x{constructor(n){this.storeService=n}ngOnInit(){void 0!==this.productsCategory&&(this.productsCategoryName=_[this.productsCategory])}static#t=this.\u0275fac=function(e){return new(e||x)(t.Y36(s))};static#e=this.\u0275cmp=t.Xpm({type:x,selectors:[["app-items-card-collection"]],inputs:{products:"products",productsCategory:"productsCategory"},decls:1,vars:1,consts:[["class","container-wrapper",4,"ngIf"],[1,"container-wrapper"],[1,"section-header",3,"innerText"],[1,"shop-items"],[3,"itemId",4,"ngFor","ngForOf"],[3,"itemId"]],template:function(e,r){1&e&&t.YNc(0,Y,5,5,"section",0),2&e&&t.Q6J("ngIf",void 0!==r.productsCategory)},dependencies:[i.sg,i.O5,C,u],styles:[".container-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.content-section[_ngcontent-%COMP%]{margin:1em}.section-header[_ngcontent-%COMP%]{font-family:Metal Mania;font-weight:400;color:#333;text-align:center;font-size:2.5em}.shop-items[_ngcontent-%COMP%]{max-width:900px;display:flex;flex-wrap:wrap;justify-content:center}"]})}class y{transform(n){return[...new Set(n.map(e=>e.category))]}static#t=this.\u0275fac=function(e){return new(e||y)};static#e=this.\u0275pipe=t.Yjl({name:"extractCategoriesFromProductList",type:y,pure:!0})}function L(o,n){if(1&o&&(t._UZ(0,"app-items-card-collection",3),t.ALo(1,"extractItemsFromProductCategory")),2&o){const e=n.$implicit,r=t.oxw().ngIf;t.Q6J("products",t.xi3(1,2,r,e))("productsCategory",e)}}function k(o,n){if(1&o&&(t.ynx(0),t.YNc(1,L,2,5,"app-items-card-collection",2),t.ALo(2,"extractCategoriesFromProductList"),t.BQk()),2&o){const e=n.ngIf;t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,e))}}function q(o,n){1&o&&t._UZ(0,"app-loading-spinner")}class I{constructor(n){this.storeService=n,this.storeProducts$=n.getStoreProducts()}ngOnInit(){}static#t=this.\u0275fac=function(e){return new(e||I)(t.Y36(s))};static#e=this.\u0275cmp=t.Xpm({type:I,selectors:[["app-store-items"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["loadingTemplate",""],[3,"products","productsCategory",4,"ngFor","ngForOf"],[3,"products","productsCategory"]],template:function(e,r){if(1&e&&(t.YNc(0,k,3,3,"ng-container",0),t.ALo(1,"async"),t.YNc(2,q,1,0,"ng-template",null,1,t.W1O)),2&e){const c=t.MAs(3);t.Q6J("ngIf",t.lcZ(1,2,r.storeProducts$))("ngIfElse",c)}},dependencies:[i.sg,i.O5,$.g,x,i.Ov,y,u]})}function z(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2),t._UZ(2,"img",3),t.TgZ(3,"span",4),t._uU(4),t.qZA()(),t.TgZ(5,"span",5),t._uU(6),t.qZA(),t.TgZ(7,"div",6)(8,"input",7,8),t.NdJ("change",function(){t.CHM(e);const c=t.MAs(9),d=t.oxw();return t.KtG(d.onUpdateCartQuantity(c))}),t.qZA(),t.TgZ(10,"button",9),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.onRemoveItemFromCart())}),t._uU(11,"REMOVE"),t.qZA()()()}if(2&o){const e=n.ngIf,r=t.oxw();t.xp6(2),t.Q6J("src",e.imageLink,t.LSH),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.hij("$",e.price,""),t.xp6(2),t.Q6J("value",r.cartProduct.productQuantity)}}class v{constructor(n,e){this.cartService=n,this.storeService=e,this.product$=e.getStoreProducts().pipe((0,M.U)(r=>r.find(c=>c.id==this.cartProduct.productId)))}ngOnInit(){}onUpdateCartQuantity(n){+n.value>0?this.cartService.modifyItem(this.cartProduct.productId,+n.value):(this.cartService.modifyItem(this.cartProduct.productId,1),n.value=1..toString())}onRemoveItemFromCart(){this.cartService.removeItem(this.cartProduct.productId)}static#t=this.\u0275fac=function(e){return new(e||v)(t.Y36(p),t.Y36(s))};static#e=this.\u0275cmp=t.Xpm({type:v,selectors:[["app-item-cart"]],inputs:{cartProduct:"cartProduct"},decls:2,vars:3,consts:[["class","cart-row",4,"ngIf"],[1,"cart-row"],[1,"cart-item","cart-column"],["width","100","height","100",1,"cart-item-image",3,"src"],[1,"cart-item-title"],[1,"cart-price","cart-column"],[1,"cart-quantity","cart-column"],["type","number",1,"cart-quantity-input",3,"value","change"],["prodQuantityInput",""],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,r){1&e&&(t.YNc(0,z,12,4,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,r.product$))},dependencies:[i.O5,i.Ov],styles:[".cart-row[_ngcontent-%COMP%]{display:flex}.cart-row[_ngcontent-%COMP%]:last-child   .cart-column[_ngcontent-%COMP%]{border:none}.cart-item[_ngcontent-%COMP%]{width:45%}.cart-quantity-input[_ngcontent-%COMP%]{height:34px;width:50px;border-radius:5px;border:1px solid #56CCF2;background-color:#eee;color:#333;padding:0;text-align:center;font-size:1.2em;margin-right:25px}.btn-danger[_ngcontent-%COMP%]{color:#fff;background-color:#eb5757;border:none;border-radius:.3em;font-weight:700}.btn[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;padding:.67em;cursor:pointer}.cart-column[_ngcontent-%COMP%]{display:flex;align-items:center;border-bottom:1px solid black;margin-right:1.5em;padding-bottom:10px;margin-top:10px}.cart-item-image[_ngcontent-%COMP%]{width:75px;height:auto;border-radius:10px}.cart-item-title[_ngcontent-%COMP%]{color:#333;margin-left:.5em;font-size:1.2em}.cart-price[_ngcontent-%COMP%]{width:20%;font-size:1.2em;color:#333}.cart-quantity[_ngcontent-%COMP%]{width:35%}"]})}function E(o,n){1&o&&t._UZ(0,"app-item-cart",16),2&o&&t.Q6J("cartProduct",n.$implicit)}function N(o,n){if(1&o&&(t.TgZ(0,"div",14),t.YNc(1,E,1,1,"app-item-cart",15),t.qZA()),2&o){const e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",e)}}function R(o,n){1&o&&(t.TgZ(0,"div",14)(1,"h2",17),t._uU(2,"Empty cart"),t.qZA()())}function j(o,n){if(1&o){const e=t.EpF();t.ynx(0),t.YNc(1,N,2,1,"div",8),t.TgZ(2,"div",9)(3,"strong",10),t._uU(4,"Total"),t.qZA(),t.TgZ(5,"span",11),t._uU(6),t.qZA()(),t.TgZ(7,"button",12),t.NdJ("click",function(){const d=t.CHM(e).ngIf,X=t.oxw();return t.KtG(X.onPurchase(d))}),t._uU(8,"PURCHASE"),t.qZA(),t.YNc(9,R,3,0,"ng-template",null,13,t.W1O),t.BQk()}if(2&o){const e=n.ngIf,r=t.MAs(10),c=t.oxw();t.xp6(1),t.Q6J("ngIf",e.length>0)("ngIfElse",r),t.xp6(5),t.hij("$",c.cartService.cartPriceTotal,"")}}class P{constructor(n,e){this.cartService=n,this.storeService=e,this.cart$=n.getCartItems(),this.store$=e.getStoreProducts()}ngOnInit(){}onPurchase(n){n.length?(alert(`Thank you for your purchase ($${this.cartService.cartPriceTotal})`),this.cartService.clearCart()):alert("Cart empty")}static#t=this.\u0275fac=function(e){return new(e||P)(t.Y36(p),t.Y36(s))};static#e=this.\u0275cmp=t.Xpm({type:P,selectors:[["app-store-cart"]],decls:13,vars:3,consts:[[1,"wrapper"],[1,"content-section"],[1,"section-header"],[1,"cart-row"],[1,"cart-item","cart-header","cart-column"],[1,"cart-price","cart-header","cart-column"],[1,"cart-quantity","cart-header","cart-column"],[4,"ngIf"],["class","cart-items m-3",4,"ngIf","ngIfElse"],[1,"cart-total"],[1,"cart-total-title"],[1,"cart-total-price"],["type","button",1,"btn","btn-primary","btn-purchase",3,"click"],["emptyCartTemplate",""],[1,"cart-items","m-3"],[3,"cartProduct",4,"ngFor","ngForOf"],[3,"cartProduct"],[1,"text-center"]],template:function(e,r){1&e&&(t.TgZ(0,"section",0)(1,"div",1)(2,"h2",2),t._uU(3,"CART"),t.qZA(),t.TgZ(4,"div",3)(5,"span",4),t._uU(6,"ITEM"),t.qZA(),t.TgZ(7,"span",5),t._uU(8,"PRICE"),t.qZA(),t.TgZ(9,"span",6),t._uU(10,"QUANTITY"),t.qZA()(),t.YNc(11,j,11,3,"ng-container",7),t.ALo(12,"async"),t.qZA()()),2&e&&(t.xp6(11),t.Q6J("ngIf",t.lcZ(12,1,r.cart$)))},dependencies:[i.sg,i.O5,v,i.Ov],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center}.content-section[_ngcontent-%COMP%]{width:900px;padding:0 1.5em;margin:1em}.section-header[_ngcontent-%COMP%]{font-family:Metal Mania;font-weight:400;color:#333;text-align:center;font-size:2.5em}.cart-header[_ngcontent-%COMP%]{font-weight:700;font-size:1.25em;color:#333}.cart-column[_ngcontent-%COMP%]{display:flex;align-items:center;border-bottom:1px solid black;margin-right:1.5em;padding-bottom:10px;margin-top:10px}.cart-row[_ngcontent-%COMP%]{display:flex}.cart-item[_ngcontent-%COMP%]{width:45%}.cart-price[_ngcontent-%COMP%]{width:20%;font-size:1.2em;color:#333}.cart-quantity[_ngcontent-%COMP%]{width:35%}.cart-item-title[_ngcontent-%COMP%]{color:#333;margin-left:.5em;font-size:1.2em}.cart-item-image[_ngcontent-%COMP%]{width:75px;height:auto;border-radius:10px}.cart-total[_ngcontent-%COMP%]{max-width:900px;border-top:1px solid #212121;padding-top:15px;text-align:end;margin-top:10px;margin-right:10px}.cart-total-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.5em;color:#000;margin-right:20px}.btn-purchase[_ngcontent-%COMP%]{display:block;margin:40px auto 80px;font-size:1.75em}.btn-primary[_ngcontent-%COMP%]{color:#fff;background-color:#56ccf2;border:none;border-radius:.3em;font-weight:700}.btn[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;padding:.67em;cursor:pointer}"]})}var B=a(6526),G=a(1840);class b{constructor(){}ngOnInit(){}static#t=this.\u0275fac=function(e){return new(e||b)};static#e=this.\u0275cmp=t.Xpm({type:b,selectors:[["app-store"]],decls:4,vars:0,template:function(e,r){1&e&&t._UZ(0,"shared-navigation")(1,"app-store-items")(2,"app-store-cart")(3,"shared-footer")},dependencies:[I,P,B.c,G.J]})}const H=[{path:"",component:b}];class O{static#t=this.\u0275fac=function(e){return new(e||O)};static#e=this.\u0275mod=t.oAB({type:O});static#n=this.\u0275inj=t.cJS({providers:[s,p],imports:[S.Bz.forChild(H),i.ez,f,g,m,T.JF,h,F.m,S.Bz]})}}}]);